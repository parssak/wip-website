(this.webpackJsonpeasyread=this.webpackJsonpeasyread||[]).push([[0],{108:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(1),c=n.n(r),i=n(15),s=n.n(i),o=(n(28),n(3)),u=n.n(o),l=n(5),d=n(4),h=n(6),p=(n(29),n(16)),b=n(17),f=n(7),j=n(11);function g(){var e=Object(h.a)(["\n  animation: 1s ",";\n"]);return g=function(){return e},e}function w(){var e=Object(h.a)(["\n  animation: 0.5s ",";\n"]);return w=function(){return e},e}function v(){var e=Object(h.a)(["",""]);return v=function(){return e},e}function m(){var e=Object(h.a)(["",""]);return m=function(){return e},e}var O="",x=0,k=.8;window.app=void 0;var y=Object(f.b)(m(),j.fadeIn),C=Object(f.b)(v(),j.pulse),P=f.a.div(w(),C),D=f.a.div(g(),y);function S(e){return L.apply(this,arguments)}function L(){return(L=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var a=new Image;a.crossOrigin="",a.onload=function(){var t=document.querySelector("#dark-canvas"),n=t.getContext("2d");t.width=a.width,t.height=a.height,n.drawImage(a,0,0);for(var r=n.getImageData(0,0,t.width,t.height),c=r.data,i=0;i<c.length;i+=4)c[i+0]=Math.abs(c[i+0]-255),c[i+1]=Math.abs(c[i+1]-255),c[i+2]=Math.abs(c[i+2]-255);var s,o,u,l,d,h,p,b,f,j=Math.floor(1.5),g=1.5-j,w=1-g;switch(j){case 0:s=w,o=0,u=g,l=g,d=w,h=0,p=0,b=g,f=w;break;case 1:s=0,o=g,u=w,l=w,d=0,h=g,p=g,b=w,f=0;break;case 2:s=g,o=w,u=0,l=0,d=g,h=w,p=w,b=0,f=g}for(var v=0,m=0;m<t.height;++m)for(var O=0;O<t.width;++O){v=4*(m*t.width+O);var x=c[v+0],y=c[v+1],C=c[v+2];c[v+0]=Math.floor(s*x+o*y+u*C),c[v+1]=Math.floor(l*x+d*y+h*C),c[v+2]=Math.floor(p*x+b*y+f*C)}n.putImageData(r,0,0),e(t.toDataURL("image/jpeg",k))},a.src=t})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e){return F.apply(this,arguments)}function F(){return(F=Object(d.a)(u.a.mark((function e(t){var n,a,r,c,i,s,o,l,d,h,p,b;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],a=0,r=2,c=1;case 4:if(!(c<=t.numPages)){e.next=31;break}return i=document.createElement("canvas"),e.next=8,t.getPage(c);case 8:return s=e.sent,o=0===a?s.rotate:s.rotate+a,l=window.devicePixelRatio,d=r*l,h=s.getViewport({scale:d,rotation:o}),p=i.getContext("2d"),i.style.width="".concat(h.width/l,"px"),i.style.height="".concat(h.height/l,"px"),i.height=h.height,i.width=h.width,e.next=20,s.render({canvasContext:p,viewport:h}).promise;case 20:return e.next=22,S(i.toDataURL());case 22:b=e.sent,x=c/t.numPages*100,console.log(x),document.createElement("img").src=b,n.push(b);case 28:c++,e.next=4;break;case 31:return e.abrupt("return",n);case 32:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(){return A.apply(this,arguments)}function A(){return(A=Object(d.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=document.getElementById("preparecanvas"),n=t.width,!(t.height>=n)){e.next=7;break}return e.abrupt("return","p");case 7:return e.abrupt("return","l");case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e,t){return I.apply(this,arguments)}function I(){return(I=Object(d.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){for(var a=new b.a(n,"mm"),r=0;r<t.length;r++){r!==t.length-1&&a.addPage(),a.setPage(r+1);var c=t[r],i=a.internal.pageSize.getWidth(),s=a.internal.pageSize.getHeight();a.setFillColor("#000000"),a.rect(0,0,i,s),a.addImage(c,0,0,i,s)}var o=O;window.webkit&&window.webkit.messageHandlers.getDocumentName.postMessage(o.concat(".pdf"));var u,l=new FileReader,d=new Blob([a.output("blob")],{type:"application/pdf"});l.readAsDataURL(d),l.onload=function(t){u=t.target.result,e(u),window.webkit||a.save(o.concat(".pdf"))}})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e){return console.log(e),new Promise((function(t){var n=new FileReader;n.addEventListener("load",(function(){n.result.slice(28),console.log("Finito."),t(n.result)}),!1),n.readAsDataURL(e)}))}function U(e){var t=Object(r.useState)(1),n=Object(l.a)(t,2),c=n[0],i=(n[1],Object(r.useRef)(null)),s=Object(r.useState)(1),o=Object(l.a)(s,2),h=o[0],b=o[1],f=Object(r.useState)(0),j=Object(l.a)(f,2),g=j[0],w=j[1],v=Object(r.useState)("Convert PDF"),m=Object(l.a)(v,2),O=m[0],k=m[1],y=Object(p.a)({file:e.dataUrl,page:c,canvasRef:i,workerSrc:"https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.2.228/pdf.worker.js",scale:h}),C=y.pdfDocument;y.pdfPage;return Object(r.useEffect)((function(){void 0!==C&&i.current&&i.current.width<=350&&b(1)})),window.generateDark=Object(d.a)(u.a.mark((function e(){var t,n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M();case 2:return t=e.sent,e.next=5,R(C);case 5:return n=e.sent,e.next=8,E(n,t);case 8:a=e.sent,window.webkit&&window.webkit.messageHandlers.openDocument.postMessage(a);case 10:case"end":return e.stop()}}),e)}))),Object(a.jsxs)("div",{children:[C?Object(a.jsx)("button",{className:"custom-file-upload",id:"readytoconvert",onClick:Object(d.a)(u.a.mark((function e(){var t,n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k("Converting..."),e.next=3,M();case 3:return t=e.sent,e.next=6,R(C);case 6:return n=e.sent,e.next=9,E(n,t);case 9:a=e.sent,100==x&&k("Converted!"),window.webkit&&window.webkit.messageHandlers.openDocument.postMessage(a);case 12:case"end":return e.stop()}}),e)}))),children:O}):null,C?Object(a.jsx)(D,{children:Object(a.jsx)("button",{className:"heading",id:"back-button",onClick:function(){e.onCancelClick()},children:"Go back"})}):null,Object(a.jsxs)("div",{children:[g!=x?w(x):null,Object(a.jsx)("canvas",{ref:i,id:"preparecanvas"})]}),Object(a.jsx)("div",{children:Object(a.jsx)("canvas",{id:"dark-canvas"})})]})}var H=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:512,a=atob(e),r=[],c=0;c<a.length;c+=n){for(var i=a.slice(c,c+n),s=new Array(i.length),o=0;o<i.length;o++)s[o]=i.charCodeAt(o);var u=new Uint8Array(s);r.push(u)}var l=new Blob(r,{type:t});return l};var T=function(){var e=Object(r.useState)(null),t=Object(l.a)(e,2),n=t[0],c=t[1],i=Object(r.useState)(!0),s=Object(l.a)(i,2),o=s[0],h=s[1],p=Object(r.useState)(null),b=Object(l.a)(p,2),f=b[0],j=b[1];return window.recieveDataFromSwift=function(){var e=Object(d.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:O=n,window.webkit.messageHandlers.jsError.postMessage("Entered function"),j(t);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Object(r.useEffect)(Object(d.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null!==f&&null==n&&(t=H(f,"application/pdf"),a=URL.createObjectURL(t),window.webkit.messageHandlers.jsError.postMessage(a.substr(0,a.length-10)),c(a));case 1:case"end":return e.stop()}}),e)})))),Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:"heading",children:[Object(a.jsx)("h2",{children:"Welcome to"}),Object(a.jsx)("h1",{children:"Darco"}),Object(a.jsx)("button",{className:"custom-file-upload",id:"changeQuality",onClick:function(){h(!o),k=o?.3:.8},children:o?"High Quality":"Low Quality"})]}),n?null:Object(a.jsxs)("label",{htmlFor:"file-upload",className:"custom-file-upload",children:[Object(a.jsx)("i",{className:"fa fa-cloud-upload"})," Select PDF"]}),Object(a.jsx)("input",{id:"file-upload",type:"file",onChange:function(){var e=Object(d.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=t.target.files).length){e.next=8;break}return n&&console.log(n[0]),O=n[0].name.substring(0,n[0].name.lastIndexOf(".")),e.next=6,N(n[0]);case 6:a=e.sent,c(a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),accept:"application/pdf"}),n?Object(a.jsx)(U,{dataUrl:n,onCancelClick:function(){c(null),j(null)}}):null,n?null:Object(a.jsx)(P,{children:Object(a.jsxs)("div",{className:"introPage",children:[Object(a.jsxs)("h1",{style:{marginTop:65,marginLeft:20},children:["Please ",Object(a.jsx)("span",{children:"select"})," a PDF"]}),Object(a.jsxs)("h1",{style:{marginTop:160,textAlign:"right",marginLeft:330,marginRight:20},children:["And we will",Object(a.jsx)("br",{}),"convert it",Object(a.jsx)("br",{})," to a more"]}),Object(a.jsx)("span",{style:{textAlign:"right",marginTop:-20,marginLeft:312,marginRight:20},id:"eye-friendly",children:"eye-friendly"}),Object(a.jsx)("h1",{style:{marginTop:0,textAlign:"right",marginLeft:343,marginRight:10},children:"alternative"})]})}),Object(a.jsx)("div",{className:"rightside",children:Object(a.jsx)("div",{id:"bragbox",children:Object(a.jsxs)("p",{children:[" An ",Object(a.jsx)("span",{id:"highlight",children:"open-source"})," project ",Object(a.jsx)("br",{}),"by  ",Object(a.jsx)("span",{id:"highlight",children:"Parssa Kyanzadeh"})," "]})})})]})},B=function(e){e&&e instanceof Function&&n.e(6).then(n.bind(null,483)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))};s.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(T,{})}),document.getElementById("root")),B()},28:function(e,t,n){},29:function(e,t,n){}},[[108,1,3]]]);
//# sourceMappingURL=main.cd2cd529.chunk.js.map